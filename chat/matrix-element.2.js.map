{"version":3,"sources":["webpack:///./src/components/events/list/index.sass","webpack:///./src/components/chats/assets/icon.vue?fdf3","webpack:///./src/components/chat/list/index.sass?ae6e","webpack:///./src/components/chats/assets/icon.vue?af80","webpack:///./src/components/chats/assets/icon.vue","webpack:///src/components/chats/assets/icon.vue","webpack:///./src/components/chats/assets/icon.vue?e412","webpack:///./src/components/chats/assets/icon.vue?5232","webpack:///./src/components/chats/assets/name.vue?cad2","webpack:///./src/components/chat/list/index.sass","webpack:///./src/components/chat/list/index.vue","webpack:///./src/components/events/list/index.vue","webpack:///./src/components/events/list/index.js","webpack:///./src/components/events/list","webpack:///./src/components/events/list/index.vue?459a","webpack:///./src/components/chat/list/index.js","webpack:///./src/components/chat/list","webpack:///./src/components/chat/list/index.vue?2203","webpack:///./src/components/chats/assets/name.vue?e6a6","webpack:///./src/components/chats/assets/name.vue?a9e9","webpack:///./src/components/events/list/index.sass?b660","webpack:///./src/components/events/list/index.sass?21cc","webpack:///./src/components/chat/list/index.sass?02be","webpack:///./src/components/chats/assets/name.vue","webpack:///src/components/chats/assets/name.vue","webpack:///./src/components/chats/assets/name.vue?82f9","webpack:///./src/components/chats/assets/name.vue?73d3","webpack:///./src/components/chats/assets/icon.vue?b18a"],"names":["render","_vm","_c","_self","staticClass","class","unknowngroupusers","groupAvatar","attrs","key","allnotifications","opacity","slidesPerView","usersinfo","status","unseen","singleAvatar","staticRenderFns","name","data","single","props","chat","m_chat","Number","hideunseen","Boolean","dontuseslides","computed","$store","state","blockedCheck","selfMembership","f","date","addseconds","moment","utc","summary","lastModified","toDate","Date","getUnreadNotificationCount","users","u","core","mtrx","anotherChatUsers","roomId","console","log","_","first","shuffle","getJoinRule","currentState","getMembers","length","member","getmatrixid","userId","membership","image","source","i","blockeduser","chatUsersInfo","us","each","kit","_this$m_chat$currentS","avatar","getStateEvents","event","content","avatarUrl","_setup","_setupProxy","bin","pocketnet","bout","minimized","fix","active","ref","timeline","error","events","lloading","scrollType","selectedMessages","searchresults","on","updatedSize","scrollE","removeEvent","editingEvent","replyEvent","e","imageGallery","menuIsVisibleHandler","scrollToEvent","_e","mobile","ios","menuOpen","imagesList","hasInputChatEmbedded","mousewheel","dscroll","_l","event_id","refInFor","fromsearch","eventinsearchresult","multiSelect","showMultiSelect","selectMessage","removeMessage","galleryOpen","text","emounted","toreference","loading","directives","rawName","value","scrollbottomshow","expression","scrolldown","Object","Array","Error","String","inject","components","lastScrollPosition","type","tmt","lscroll","c","ls","voiceMessageQueue","countshow","provide","addToQueue","message","id","find","v","playNext","current","sortedVoiceMessageQueue","findIndex","next","setTime","play","activated","restoreScrollPosition","deactivated","saveScrollPosition","watch","ev","immediate","handler","notificationCount","scrollTop","scrollToNew","sortBy","a","isios","mapState","auth","mapGetters","eventsByPages","ps","pc","push","destroyed","menuState","set","updated","methods","container","$refs","originalScrollBehavior","style","scrollBehavior","$nextTick","scrollTo","top","_this$lscroll","scrollToReadMessages","shareEvent","$emit","showerror","$dialog","alert","stringifyiedError","okText","backdropClose","catch","dupdated","debounce","size","scroll","ddscroll","scrollCorrection","s","scrollHeight","clientHeight","showPhotoSwipe","index","isOpen","$set","options","hidePhotoSwipe","scrolling","r_element","offsetTop","classList","add","setTimeout","remove","isVisible","preventDefault","deltaY","smoothScroll","target","speed","smooth","moving","pos","frame","document","body","documentElement","dest","delta","normalizeWheelDelta","Math","max","min","update","detail","wheelDelta","abs","requestFrame","window","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","msRequestAnimationFrame","func","filter","item","message_id","splice","reference","filterType","default","encryptedEvents","scrollingTo","cancelNextScroll","lastEvent","esize","p_b","p_f","updateTimeout","updateInterval","firstPaginate","readPromise","mounted","init","clearInterval","setInterval","settings_read","dontreadreceipts","eventsTypes","types","toArray","members","created","beforeDestroy","unpaginate","_eventCount","getLiveTimeline","wh","getEvents","lastCallAccess","pop","localRedactionEvent","getRedactionEvent","accepted","keys","reverse","relations","replacingEventDate","getDate","Infinity","uniq","clearEventId","makeid","getEventsAndEncrypt","Promise","all","map","pcrypto","resolve","decrypted","pr","subtype","deep","einfo","getAudio","msgtype","getAudioUnencrypt","decryptEvent","then","d","ts","timelineSet","rt","getChildEventsForEvent","last","getLastReplacement","edited","block","customTimelineSet","_ref","_asyncToGenerator","sdk","Filter","client","getUserId","setDefinition","room","contains_url","filterId","getOrCreateFilter","credentials","getOrCreateFilteredTimelineSet","_x","_x2","apply","arguments","_ref2","getTimelineSet","TimelineWindow","load","r","autoPaginateAll","paginateToEvent","promise","paginate","autoPaginate","direction","needLoad","rnd","canPaginate","count","reject","readAll","safespace","readEvent","streamMode","byme","me","sender","sendReadReceipt","readFirst","readLast","readEvents","readOne","debouncedReadAll","readError","eid","setRoomReadMarkers","readed","finally","hasFocus","hiddenInParent","getJoinedMemberCount","eventslist","pretry","globalpreloader","isShowGroupIcon","public","isPublic","miniappicon","_v","_s","convertedName","preview","_this$m_chat","_this$m_chat2","getContent","user","userinfo","names","chatUsers","indexOf","replace","join","markMatches","markText","_this$m_chat3","miniappchat","slice","icon"],"mappings":"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","file":"matrix-element.2.js","sourcesContent":["// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".eventWrapper[data-v-7cedee84] .event{padding:.25em 0}.eventWrapper[data-v-7cedee84]{transition:background .3s}.eventWrapper.fromsearch[data-v-7cedee84],.eventWrapper.fromsearch[data-v-7cedee84] .allscreen{background:rgba(var(--color-bg-ac-bright),.1)}.eventWrapper.attention[data-v-7cedee84],.eventWrapper.attention[data-v-7cedee84] .allscreen{background:rgb(var(--neutral-grad-0))}.list-enter-active[data-v-7cedee84],.list-leave-active[data-v-7cedee84]{transition:all 1s}.list-enter[data-v-7cedee84],.list-leave-to[data-v-7cedee84]{opacity:0}#events[data-v-7cedee84]{--events-padding-bottom:51px;left:0;right:0;top:0;bottom:0;padding-bottom:50px;position:absolute;transition:.3s}#events[data-chat-input-embedded=true][data-v-7cedee84]{--events-padding-bottom:100px}#events.mobile[data-v-7cedee84]{padding-bottom:calc(var(--app-margin-bottom, 0) + var(--events-padding-bottom));transform:translate3d(0,calc(var(--keyboardheight, 0)*-1 - -1px),0)}#events.mobile .scrollbottom[data-v-7cedee84]{bottom:6em}.dummyheight[data-v-7cedee84]{height:100%;width:2px;left:0;right:0;top:0;bottom:0;background:rgb(var(--color-shadow-base))}.preloadingWrapper[data-v-7cedee84]{padding:2em;text-align:center;opacity:.5;color:rgb(var(--text-color))}.scrollbottom[data-v-7cedee84]{position:absolute;right:.5em;bottom:4em;cursor:pointer;border-radius:50%;background:rgb(var(--background-main));box-shadow:0 5px 7px -5px rgba(var(--color-shadow-base),.7);color:rgb(var(--color-txt-gray-dark));width:35px;height:35px;line-height:35px;text-align:center;z-index:3}.scrollbottom i[data-v-7cedee84]{font-size:.7em}.eventsflex[data-v-7cedee84]{display:flex;flex-flow:column;overflow-y:overlay;overflow-x:hidden;max-width:640px;margin:0 auto;-webkit-overflow-scrolling:touch;overscroll-behavior:contain;flex-wrap:nowrap;width:100%;height:100%;scroll-behavior:auto;continue:fragments;justify-content:flex-start;transform:scaleY(-1);contain:strict}.eventsflex.freeze[data-v-7cedee84]{overflow-y:hidden}.eventsflex .ewr[data-v-7cedee84]{position:relative}.eventsflex .eventspage[data-v-7cedee84],.eventsflex .ewr[data-v-7cedee84]{width:100%;display:flex;flex-flow:column;flex-wrap:nowrap;justify-content:flex-start}.eventsflex .errorWrapper[data-v-7cedee84]{padding:.5em}.eventsflex .errorWrapper .btnwrp[data-v-7cedee84]{padding-top:.5em}.eventsflex .errorWrapper .error[data-v-7cedee84]{padding:1em;border-radius:1em;background:rgb(var(--neutral-grad-0))}.eventsflex .errorWrapper[data-v-7cedee84],.eventsflex .eventWrapper[data-v-7cedee84]{width:100%;transform:scaleY(-1)}.eventsflex.mobile[data-v-7cedee84]{scroll-behavior:smooth}.eventsflex.mobile[data-v-7cedee84] .dropdown.visible{top:-55px}.eventsflex.mobile[data-v-7cedee84] .outer-div .backgr,.eventsflex.mobile[data-v-7cedee84] .outer-div .menuwrapper{position:absolute}.eventsflex.mobile.ios.menuOpen[data-v-7cedee84]{overflow:visible}.galleryRow[data-v-7cedee84]{display:flex;align-items:flex-end}.galleryRow .messageImg[data-v-7cedee84]{max-width:50%;margin:0 10px;position:relative}.galleryRow .messageImg .img[data-v-7cedee84]{display:block;border-radius:.5em;position:relative;max-width:100%}.galleryRow .messageImg .loadingImg[data-v-7cedee84]{display:flex;align-items:center;justify-content:center;border-radius:.5em;position:relative;max-width:300px;height:250px}.galleryRow .messageImg .loadingImg .imgPreview[data-v-7cedee84]{border-radius:.5em;position:relative;max-width:100%;height:100%;opacity:.6}.galleryRow .messageImg .loadingImg .clipLoader[data-v-7cedee84]{position:absolute;z-index:9999;left:50%;right:0;top:50%;bottom:0;transform:translate(-50,50);display:flex;align-items:center;justify-content:center}.galleryRow .messageImg .imgMsg img[data-v-7cedee84]{max-width:100%;-o-object-fit:cover;object-fit:cover;border-radius:1em;display:block}.galleryRow .messageImg .metaLink[data-v-7cedee84]{background:#000}.galleryRow .messageImg .metaLink .metaMessageLink .metaTitle[data-v-7cedee84]{font-weight:700;font-size:.9em}.galleryRow .messageImg .metaLink .metaMessageLink .metaDescription[data-v-7cedee84]{margin:.5em 0;font-size:.8em}.galleryRow .messageImg .metaLink .metaMessageLink .metaImgWrapper[data-v-7cedee84]{display:block;max-width:300px;-o-object-fit:cover;object-fit:cover}.galleryRow .messageImg .metaLink .metaMessageLink .metaImgWrapper img[data-v-7cedee84]{display:block;width:100%;height:100%}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../../node_modules/sass-loader/dist/cjs.js??ref--10-oneOf-1-4!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./icon.vue?vue&type=style&index=0&id=cd2bc92e&prod&scoped=true&lang=sass\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add CSS to Shadow Root\nvar add = require(\"!../../../../node_modules/vue-style-loader/lib/addStylesShadow.js\").default\nmodule.exports.__inject__ = function (shadowRoot) {\n  add(\"56e5f003\", content, shadowRoot)\n};","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../../node_modules/sass-loader/dist/cjs.js??ref--10-oneOf-1-4!./index.sass?vue&type=style&index=0&id=430b7992&prod&scoped=true&lang=sass&external\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add CSS to Shadow Root\nvar add = require(\"!../../../../node_modules/vue-style-loader/lib/addStylesShadow.js\").default\nmodule.exports.__inject__ = function (shadowRoot) {\n  add(\"629a693a\", content, shadowRoot)\n};","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".opacity[data-v-cd2bc92e]{opacity:0}.chatIcon[data-v-cd2bc92e]{width:100%;position:relative}.unknowngroupusersicon[data-v-cd2bc92e]{position:absolute;left:0;top:0;bottom:0;right:0;font-size:.7em;display:flex;justify-content:center;align-items:center;color:#fff}.unknowngroupusers .bgimage[data-v-cd2bc92e]{transform:scale(.7)}.chatGroupIcon[data-v-cd2bc92e],.chatGroupIcon img[data-v-cd2bc92e]{width:100%;height:100%}.chatGroupIcon img[data-v-cd2bc92e]{border-radius:50%;-o-object-fit:cover;object-fit:cover;-o-object-position:50% 50%;object-position:50% 50%;position:absolute;top:0;z-index:100}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"chatIcon\",class:{ unknowngroupusers: _vm.unknowngroupusers }},[(_vm.groupAvatar)?_c('div',{staticClass:\"chatGroupIcon\"},[_c('userpic',{attrs:{\"image\":_vm.groupAvatar}})],1):_c('userspic',{key:_vm.allnotifications,class:{ opacity: _vm.groupAvatar },attrs:{\"slidesPerView\":_vm.slidesPerView,\"users\":_vm.usersinfo,\"status\":_vm.status,\"unseen\":_vm.unseen,\"single\":_vm.singleAvatar}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n\t<div class=\"chatIcon\" :class=\"{ unknowngroupusers }\">\r\n\t\t<div v-if=\"groupAvatar\" class=\"chatGroupIcon\">\r\n\t\t\t<userpic :image=\"groupAvatar\"/>\r\n\t\t</div>\r\n\t\t<userspic\r\n\t\t\tv-else\r\n\t\t\t:slidesPerView=\"slidesPerView\"\r\n\t\t\t:users=\"usersinfo\"\r\n\t\t\t:status=\"status\"\r\n\t\t\t:unseen=\"unseen\"\r\n\t\t\t:key=\"allnotifications\"\r\n\t\t\t:single=\"singleAvatar\"\r\n\t\t\t:class=\"{ opacity: groupAvatar }\"\r\n\t\t/>\r\n\r\n\t\t<!--<div class=\"unknowngroupusersicon\" v-if=\"unknowngroupusers\">\r\n\t\t\t<i class=\"fas fa-question\"></i>\r\n\t\t</div>-->\r\n\t</div>\r\n</template>\r\n\r\n<style scoped lang=\"sass\">\r\n.opacity\r\n\topacity: 0\r\n.chatIcon\r\n\twidth: 100%\r\n\tposition: relative\r\n\r\n.unknowngroupusersicon\r\n\tposition: absolute\r\n\tleft: 0\r\n\ttop: 0\r\n\tbottom: 0\r\n\tright: 0\r\n\tfont-size: 0.7em\r\n\tdisplay: flex\r\n\tjustify-content: center\r\n\talign-items: center\r\n\tcolor: #fff\r\n\r\n.unknowngroupusers\r\n\t.bgimage\r\n\t\ttransform: scale(0.7)\r\n.chatGroupIcon\r\n\twidth: 100%\r\n\theight: 100%\r\n.chatGroupIcon img\r\n\twidth: 100%\r\n\theight: 100%\r\n\tborder-radius: 50%\r\n\tobject-fit: cover\r\n\tobject-position: 50% 50%\r\n\tposition: absolute\r\n\ttop: 0\r\n\tz-index: 100\r\n</style>\r\n\r\n<script>\r\nimport f from \"@/application/functions\";\r\n\r\nexport default {\r\n\tname: \"chatIcon\",\r\n\tdata: function () {\r\n\t\treturn {\r\n\t\t\tsingle: [],\r\n\t\t};\r\n\t},\r\n\tprops: {\r\n\t\tchat: {},\r\n\t\tm_chat: {},\r\n\t\tslidesPerView: Number,\r\n\t\thideunseen: Boolean,\r\n\t\tdontuseslides: Boolean,\r\n\t},\r\n\tcomputed: {\r\n\t\tallnotifications: function () {\r\n\t\t\treturn this.$store.state.allnotifications || \"0\";\r\n\t\t},\r\n\r\n\t\tunseen: function () {\r\n\t\t\tif (this.hideunseen) return 0;\r\n\r\n\t\t\tif (this.blockedCheck) return 0;\r\n\r\n\t\t\tif (this.m_chat.selfMembership === \"invite\") {\r\n\t\t\t\tif (\r\n\t\t\t\t\tf.date.addseconds(\r\n\t\t\t\t\t\tmoment.utc(this.m_chat.summary.lastModified).toDate(),\r\n\t\t\t\t\t\t86400\r\n\t\t\t\t\t) > new Date()\r\n\t\t\t\t)\r\n\t\t\t\t\treturn 1;\r\n\t\t\t}\r\n\r\n\t\t\tthis.allnotifications;\r\n\r\n\t\t\treturn this.m_chat.getUnreadNotificationCount();\r\n\t\t},\r\n\t\tusers: function () {\r\n\t\t\tif (!this.chat) return [];\r\n\r\n\t\t\tvar u = this.core.mtrx.anotherChatUsers(this.chat.roomId);\r\n\r\n\t\t\r\n\r\n\t\t\tconsole.log(\"USER\", u)\r\n\r\n\t\t\tif (this.dontuseslides) {\r\n\t\t\t\tu = _.first(u, 4);\r\n\t\t\t}\r\n\r\n\t\t\treturn _.first(_.shuffle(u), 49);\r\n\t\t},\r\n\t\tsingleAvatar: function () {\r\n\t\t\tif (!this.chat && !this.m_chat) return {};\r\n\t\t\tif (\r\n\t\t\t\tthis.m_chat.getJoinRule() === \"public\" &&\r\n\t\t\t\tthis.m_chat.currentState.getMembers().length === 1\r\n\t\t\t) {\r\n\t\t\t\tvar member = this.m_chat.currentState.getMembers()[0];\r\n\t\t\t\tvar data = this.$store.state.users[f.getmatrixid(member.userId)];\r\n\t\t\t\tif (data) {\r\n\t\t\t\t\tdata.status = member.membership;\r\n\t\t\t\t\tdata.image = data.source.i;\r\n\t\t\t\t\treturn data;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn {};\r\n\t\t},\r\n\t\tblockedCheck: function () {\r\n\t\t\tvar users = this.core.mtrx.anotherChatUsers(this.m_chat.roomId);\r\n\r\n\t\t\tif (users.length == 1) {\r\n\t\t\t\treturn this.core.mtrx.blockeduser(users[0].userId);\r\n\t\t\t}\r\n\t\t},\r\n\t\tusersinfo: function () {\r\n\t\t\tvar u = this.core.mtrx.chatUsersInfo(\r\n\t\t\t\tthis.chat.roomId,\r\n\t\t\t\t\"anotherChatUsers\"\r\n\t\t\t);\r\n\r\n\t\t\tif (this.dontuseslides) {\r\n\t\t\t\tu = _.first(u, 4);\r\n\t\t\t}\r\n\r\n\t\t\treturn _.first(_.shuffle(u), 49);\r\n\t\t},\r\n\r\n\t\tstatus: function () {\r\n\t\t\tvar us = {};\r\n\r\n\t\t\t_.each(this.users, (u) => {\r\n\t\t\t\tus[u.userId] = this.core.mtrx.blockeduser(u.userId) ? \"blocked\" : u.membership;\r\n\t\t\t});\r\n\r\n\t\t\treturn us;\r\n\t\t},\r\n\r\n\t\tunknowngroupusers: function () {\r\n\t\t\treturn this.core.mtrx.kit.unknowngroupusers(this.m_chat);\r\n\t\t},\r\n\r\n\t\tgroupAvatar: function () {\r\n\t\t\tconst avatar =\r\n\t\t\t\tthis.m_chat.currentState.getStateEvents(\"m.room.avatar\")[0]?.event\r\n\t\t\t\t\t.content.avatarUrl;\r\n\t\t\treturn avatar !== \"\" ? avatar : \"\";\r\n\t\t}\r\n\t},\r\n};\r\n</script>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./icon.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./icon.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./icon.vue?vue&type=template&id=cd2bc92e&scoped=true\"\nimport script from \"./icon.vue?vue&type=script&lang=js\"\nexport * from \"./icon.vue?vue&type=script&lang=js\"\nfunction injectStyles (context) {\n  \n  var style0 = require(\"./icon.vue?vue&type=style&index=0&id=cd2bc92e&prod&scoped=true&lang=sass\")\nif (style0.__inject__) style0.__inject__(context)\n\n}\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  injectStyles,\n  \"cd2bc92e\",\n  null\n  ,true\n)\n\nexport default component.exports","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".nameofchat[data-v-8fb6d080]{white-space:nowrap}.nameline[data-v-8fb6d080]{display:flex;align-items:flex-end}.miniappicon[data-v-8fb6d080]{margin-right:.25em;margin-block:.25em}.miniappicon .bgimage[data-v-8fb6d080]{width:12px;height:12px;border-radius:2px}.iconGroup[data-v-8fb6d080]{font-size:.4em;width:16px;min-width:16px;text-align:center;height:16px;line-height:16px;border-radius:8px;background:rgb(var(--neutral-grad-2));margin-right:.5em;margin-block:.25em}.iconGroup.public[data-v-8fb6d080]{background:rgb(var(--color-good))}.iconGroup.public i[data-v-8fb6d080]{color:rgb(var(--text-on-bg-shadow-color))}.iconGroup i[data-v-8fb6d080]{color:rgb(var(--neutral-grad-1))}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"[data-v-430b7992] .eventMember{text-align:left}[data-v-430b7992] .eventMember span{font-size:.9em}.pswp img[data-v-430b7992]{max-width:none;-o-object-fit:contain;object-fit:contain}#chatList.minimized:not(.active) .timeLineWrapper[data-v-430b7992]{padding-left:.5em}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('div',{class:{\n\t\tbin: _vm.pocketnet,\n\t\tbout: !_vm.pocketnet,\n\t\tminimized: _vm.minimized,\n\t\tfix: _vm.pocketnet,\n\t\tactive: _vm.active,\n\t},attrs:{\"id\":\"chatList\"}},[_c('div',{ref:\"work\",staticClass:\"work\"},[_c('div',{ref:\"events\",staticClass:\"timeLineWrapper\"},[(_vm.timeline)?_c('events',{ref:\"eventslist\",attrs:{\"error\":_vm.error,\"timeline\":_vm.timeline,\"events\":_vm.events,\"chat\":_vm.chat,\"loading\":_vm.lloading,\"scrollType\":_vm.scrollType,\"selectedMessages\":_vm.selectedMessages,\"searchresults\":_vm.searchresults},on:{\"updated\":_vm.updatedSize,\"scroll\":_vm.scrollE,\"removeEvent\":_vm.removeEvent,\"editingEvent\":_vm.editingEvent,\"replyEvent\":_vm.replyEvent,\"galleryEventOpen\":(e) => _vm.imageGallery(e),\"menuIsVisible\":_vm.menuIsVisibleHandler,\"toreference\":_vm.scrollToEvent}}):_vm._e()],1)])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('div',{staticClass:\"maskedtop\",class:{\n\t\tmobile: _vm.mobile,\n\t\tios: _vm.ios,\n\t\tmenuOpen: _vm.menuOpen,\n\t\timagesList: this.scrollType === 'custom' ? 'imagesList' : '',\n\t},attrs:{\"id\":\"events\",\"data-chat-input-embedded\":_vm.hasInputChatEmbedded}},[_c('div',{ref:\"container\",staticClass:\"eventsflex\",class:{ mobile: _vm.mobile, ios: _vm.ios, menuOpen: _vm.menuOpen },on:{\"wheel\":_vm.mousewheel,\"scroll\":_vm.dscroll}},[_c('div',{staticClass:\"ewr\"},_vm._l((_vm.events),function(event,i){return _c('div',{key:event.event.event_id,ref:event.event.event_id,refInFor:true,staticClass:\"eventWrapper\",class:{ fromsearch: _vm.eventinsearchresult(event) },attrs:{\"event\":event.event.event_id}},[_c('eventsEvent',{attrs:{\"event\":event,\"prevevent\":_vm.events[i + 1],\"galleryData\":_vm.events,\"chat\":_vm.chat,\"timeline\":_vm.timeline,\"multiSelect\":_vm.multiSelect,\"selectedMessages\":_vm.selectedMessages},on:{\"showMultiSelect\":_vm.showMultiSelect,\"selectMessage\":_vm.selectMessage,\"removeMessage\":_vm.removeMessage,\"openImageEvent\":(e) => _vm.galleryOpen(e),\"removeEvent\":(e) => _vm.removeEvent(event),\"editing\":(text) => _vm.editingEvent({ event, text }),\"reply\":(e) => _vm.replyEvent({ event }),\"mounted\":_vm.emounted,\"menuIsVisible\":_vm.menuIsVisibleHandler,\"toreference\":_vm.toreference}})],1)}),0),(_vm.loading)?_c('div',{staticClass:\"preloadingWrapper\"},[_c('linepreloader')],1):_vm._e()]),_c('transition',{attrs:{\"name\":\"fade\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.scrollbottomshow),expression:\"scrollbottomshow\"}],staticClass:\"scrollbottom\",on:{\"click\":_vm.scrolldown}},[_c('i',{staticClass:\"fas fa-chevron-down\"})])])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { mapState } from \"vuex\";\r\nimport f from \"@/application/functions\";\r\nimport { mapGetters } from \"vuex/dist/vuex.common.js\";\r\n\r\nexport default {\r\n\tname: \"events\",\r\n\tprops: {\r\n\t\ttimeline: Object,\r\n\t\tevents: Array,\r\n\t\tchat: Object,\r\n\t\tloading: Boolean,\r\n\t\tscrollType: \"\",\r\n\t\tsearchresults: null,\r\n\t\terror: [Object, Error, String],\r\n\t\tselectedMessages: [],\r\n\t},\r\n\tinject: [\"matches\", \"menuState\"],\r\n\tcomponents: {},\r\n\r\n\tdata: function () {\r\n\t\treturn {\r\n\t\t\tlastScrollPosition: 0,\r\n\t\t\ttype: \"\",\r\n\t\t\ttmt: null,\r\n\t\t\tlscroll: null,\r\n\t\t\tmenuOpen: false,\r\n\t\t\tc: 1,\r\n\t\t\tls: 0,\r\n\t\t\tvoiceMessageQueue: [],\r\n\t\t\tcountshow: 0,\r\n\t\t\tmultiSelect: false,\r\n\t\t};\r\n\t},\r\n\tprovide() {\r\n\t\treturn {\r\n\t\t\taddToQueue: (message, id) => {\r\n\t\t\t\tvar f = _.find(this.voiceMessageQueue, (v) => {\r\n\t\t\t\t\treturn v.id == id;\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif (!f)\r\n\t\t\t\t\tthis.voiceMessageQueue = [...this.voiceMessageQueue, { message, id }];\r\n\t\t\t},\r\n\t\t\tplayNext: (id) => {\r\n\t\t\t\tlet current = this.sortedVoiceMessageQueue.findIndex((i) => {\r\n\t\t\t\t\treturn i.id === id;\r\n\t\t\t\t});\r\n\t\t\t\tlet next =\r\n\t\t\t\t\tcurrent === -1 ? null : this.sortedVoiceMessageQueue[current + 1];\r\n\t\t\t\tif (next) {\r\n\t\t\t\t\tnext.message.setTime(0);\r\n\t\t\t\t\tnext.message.play();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t};\r\n\t},\r\n\tactivated() {\r\n\t\tthis.restoreScrollPosition();\r\n\t},\r\n\tdeactivated() {\r\n\t\tthis.saveScrollPosition();\r\n\t},\r\n\twatch: {\r\n\t\tevents: function (ev) {},\r\n\r\n\t\tselectedMessages: {\r\n\t\t\timmediate: true,\r\n\t\t\thandler: function () {\r\n\t\t\t\tif (this.selectedMessages.length === 0) {\r\n\t\t\t\t\tthis.multiSelect = false;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\tnotificationCount: function () {\r\n\t\t\tif (\r\n\t\t\t\tthis.lscroll &&\r\n\t\t\t\tthis.lscroll.scrollTop < 180 &&\r\n\t\t\t\tthis.chat &&\r\n\t\t\t\tthis.chat.getUnreadNotificationCount()\r\n\t\t\t) {\r\n\t\t\t\tthis.scrollToNew();\r\n\t\t\t}\r\n\t\t},\r\n\t},\r\n\tcomputed: {\r\n\t\tsortedVoiceMessageQueue() {\r\n\t\t\treturn _.sortBy(this.voiceMessageQueue, (a) => {\r\n\t\t\t\treturn a.id;\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\tios() {\r\n\t\t\treturn f.isios();\r\n\t\t},\r\n\r\n\t\t...mapState({\r\n\t\t\tauth: (state) => state.auth,\r\n\t\t\tmobile: (state) => state.mobile,\r\n\r\n\t\t\tscrollbottomshow: function () {\r\n\t\t\t\treturn this.lscroll && this.lscroll.scrollTop > 500;\r\n\t\t\t},\r\n\t\t\tminimized: (state) => state.minimized,\r\n\t\t\tnotificationCount: (state) => state.allnotifications,\r\n\t\t}),\r\n\t\t...mapGetters([\"hasInputChatEmbedded\"]),\r\n\t\teventsByPages: function () {\r\n\t\t\tvar ps = [];\r\n\t\t\tvar pc = 0;\r\n\r\n\t\t\t_.each(this.events, function (e) {\r\n\t\t\t\tif (!pc) ps.push([]);\r\n\r\n\t\t\t\tps[ps.length - 1].push(e);\r\n\r\n\t\t\t\tpc++;\r\n\r\n\t\t\t\tif (pc > 19) pc = 0;\r\n\t\t\t});\r\n\r\n\t\t\treturn ps;\r\n\t\t},\r\n\t},\r\n\tdestroyed: function () {\r\n\t\t/*this.core.menu(null);*/\r\n\t\tthis.menuState.set(null);\r\n\t},\r\n\tupdated: function () {\r\n\t\t/*if(this.countshow === 0) {\r\n\t  this.scrollToReadMessages();\r\n\t}\r\n\tthis.countshow = 1;*/\r\n\t},\r\n\tmethods: {\r\n\t\teventinsearchresult: function (event) {\r\n\t\t\tif (this.searchresults) {\r\n\t\t\t\treturn _.find(this.searchresults, (e) => {\r\n\t\t\t\t\treturn e.event.event_id == event.event.event_id;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\treturn false;\r\n\t\t},\r\n\t\trestoreScrollPosition() {\r\n\t\t\tconst container = this.$refs.container;\r\n\t\t\tconst originalScrollBehavior = container.style.scrollBehavior;\r\n\t\t\tcontainer.style.scrollBehavior = \"auto\";\r\n\r\n\t\t\tthis.$nextTick(() => {\r\n\t\t\t\tcontainer.scrollTo({ top: this.lastScrollPosition });\r\n\t\t\t\tcontainer.style.scrollBehavior = originalScrollBehavior;\r\n\t\t\t});\r\n\t\t},\r\n\t\tsaveScrollPosition() {\r\n\t\t\tthis.lastScrollPosition = this.lscroll?.scrollTop;\r\n\t\t},\r\n\t\tscrollToReadMessages: function () {\r\n\t\t\t/*if(this.notificationCount > 0) {\r\n\t\tconst elem = document.getElementById(\"eventWrapper_\" + (this.notificationCount + 1));\r\n\r\n\t\tif(elem)\r\n\t\t  elem.scrollIntoView()\r\n\t  }*/\r\n\t\t},\r\n\t\tshareEvent: function ({ event }) {\r\n\t\t\tthis.$emit(\"shareEvent\", { event });\r\n\t\t},\r\n\t\tshowerror: function () {\r\n\t\t\t// stringifyiedError\r\n\r\n\t\t\treturn this.$dialog\r\n\t\t\t\t.alert(this.stringifyiedError, {\r\n\t\t\t\t\tokText: \"Ok\",\r\n\t\t\t\t\tbackdropClose: true,\r\n\t\t\t\t})\r\n\t\t\t\t.catch((e) => {});\r\n\t\t},\r\n\r\n\t\tdupdated: _.debounce(function () {\r\n\t\t\tthis.$emit(\"updated\", this.size());\r\n\t\t}, 75),\r\n\r\n\t\tdscroll: _.debounce(function () {\r\n\t\t\treturn this.scroll();\r\n\t\t}, 35),\r\n\r\n\t\tddscroll: function (e) {\r\n\t\t\t/*var _ls = this.$refs['container'].scrollTop\r\n\r\n\t\t\tif (Math.abs(_ls - this.ls) > 500 && this.c * _ls < this.c * this.ls){\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tthis.ls = _ls\r\n\t\t\t}*/\r\n\r\n\t\t\tthis.dscroll();\r\n\t\t},\r\n\r\n\t\temounted: function () {\r\n\t\t\tthis.$nextTick(function () {\r\n\t\t\t\tthis.scrollCorrection();\r\n\t\t\t\tthis.dupdated();\r\n\t\t\t});\r\n\r\n\t\t\t/*if(!this.mobile)\r\n\t\t\t\tnew this.smoothScroll(this.$refs[\"container\"], 120, 15);*/\r\n\t\t},\r\n\t\tscroll: function () {\r\n\t\t\tthis.$emit(\"scroll\", this.size());\r\n\t\t},\r\n\r\n\t\tsize: function () {\r\n\t\t\tvar s = {\r\n\t\t\t\tscrollHeight: 0,\r\n\t\t\t\tscrollTop: 0,\r\n\t\t\t\tclientHeight: 0,\r\n\t\t\t};\r\n\r\n\t\t\tif (this.$refs[\"container\"]) {\r\n\t\t\t\ts.scrollHeight = this.$refs[\"container\"].scrollHeight;\r\n\t\t\t\ts.scrollTop = this.c * this.$refs[\"container\"].scrollTop;\r\n\t\t\t\ts.clientHeight = this.$refs[\"container\"].clientHeight;\r\n\t\t\t}\r\n\r\n\t\t\tthis.lscroll = s;\r\n\r\n\t\t\treturn s;\r\n\t\t},\r\n\r\n\t\teditingEvent: function ({ event, text }) {\r\n\t\t\tthis.$emit(\"editingEvent\", { event, text });\r\n\t\t},\r\n\r\n\t\treplyEvent: function ({ event }) {\r\n\t\t\tthis.$emit(\"replyEvent\", { event });\r\n\t\t},\r\n\r\n\t\tremoveEvent: function (event) {\r\n\t\t\tthis.$emit(\"removeEvent\", event);\r\n\t\t},\r\n\r\n\t\tshowPhotoSwipe(index) {\r\n\t\t\tthis.isOpen = true;\r\n\t\t\tthis.$set(this.options, \"index\", index);\r\n\t\t},\r\n\r\n\t\thidePhotoSwipe() {\r\n\t\t\tthis.isOpen = false;\r\n\t\t},\r\n\r\n\t\tgalleryOpen(e) {\r\n\t\t\tthis.$emit(\"galleryEventOpen\", e);\r\n\t\t},\r\n\r\n\t\tscrolldown() {\r\n\t\t\tthis.scrollToNew(0);\r\n\t\t},\r\n\r\n\t\tscrollCorrection() {\r\n\t\t\t//this.scrollToNew(this.c * this.ls)\r\n\t\t},\r\n\t\tscrollToNew(s) {\r\n\t\t\tconst container = this.$refs[\"container\"];\r\n\t\t\tif (container.scrolling) {\r\n\t\t\t\tcontainer.scrolling(-1, this.c * s);\r\n\t\t\t} else {\r\n\t\t\t\tcontainer.scrollTop = this.c * s;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tscrollToEvent(e) {\r\n\t\t\tif (this.$refs[e.event.event_id]) {\r\n\t\t\t\tvar r_element = this.$refs[e.event.event_id][0];\r\n\t\t\t\tthis.scrollToNew(\r\n\t\t\t\t\tr_element.offsetTop -\r\n\t\t\t\t\t\tthis.lscroll.clientHeight / 2 +\r\n\t\t\t\t\t\tr_element.clientHeight / 2\r\n\t\t\t\t);\r\n\r\n\t\t\t\tr_element.classList.add(\"attention\");\r\n\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tr_element.classList.remove(\"attention\");\r\n\t\t\t\t}, 1000);\r\n\t\t\t}\r\n\t\t\t//this.scrollToNew(120);\r\n\t\t},\r\n\r\n\t\tmenuIsVisibleHandler: function (isVisible) {\r\n\t\t\tthis.menuOpen = isVisible;\r\n\t\t\tthis.$emit(\"menuIsVisible\", isVisible);\r\n\t\t},\r\n\r\n\t\tmousewheel: function (e) {\r\n\t\t\tif (this.scrollType === \"custom\") {\r\n\t\t\t\treturn;\r\n\t\t\t} else {\r\n\t\t\t\t/*if(this.$refs[\"container\"].scrollTop >= this.$refs[\"container\"].scrollHeight - this.$refs[\"container\"].clientHeight - 1 && e.deltaY < 0) {\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(this.$refs[\"container\"].scrollTop == 0 && e.deltaY > 0) {\r\n\t\t\t\t\treturn\r\n\t\t\t\t}*/\r\n\r\n\t\t\t\te.preventDefault();\r\n\r\n\t\t\t\tthis.$refs[\"container\"].scrollTop += -e.deltaY;\r\n\r\n\t\t\t\t/*const container = this.$refs[\"container\"];\r\n\t\t\t\tif (container.scrolling) {\r\n\t\t\t\t\tcontainer.scrolling(e);\r\n\t\t\t\t}*/\r\n\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t},\r\n\t\tsmoothScroll: function (target, speed, smooth) {\r\n\t\t\tlet moving = false,\r\n\t\t\t\tpos = target.scrollTop,\r\n\t\t\t\tframe =\r\n\t\t\t\t\ttarget === document.body && document.documentElement\r\n\t\t\t\t\t\t? document.documentElement\r\n\t\t\t\t\t\t: target; // safari is the new IE\r\n\r\n\t\t\ttarget.scrolling = function (e, dest) {\r\n\t\t\t\tlet delta = normalizeWheelDelta(e);\r\n\r\n\t\t\t\tpos += delta * speed;\r\n\t\t\t\tpos = Math.max(\r\n\t\t\t\t\t0,\r\n\t\t\t\t\tMath.min(pos, dest || target.scrollHeight - frame.clientHeight)\r\n\t\t\t\t); // limit scrolling\r\n\r\n\t\t\t\tif (!moving) update();\r\n\t\t\t};\r\n\r\n\t\t\tfunction normalizeWheelDelta(e) {\r\n\t\t\t\tif (e.detail) {\r\n\t\t\t\t\tif (e.wheelDelta) {\r\n\t\t\t\t\t\treturn (e.wheelDelta / e.detail / 40) * (e.detail > 0 ? 1 : -1); // Opera\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn -e.detail / 3; // Firefox\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (e.wheelDelta) {\r\n\t\t\t\t\treturn e.wheelDelta / 120; // IE,Safari,Chrome\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn e;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfunction update() {\r\n\t\t\t\tmoving = true;\r\n\r\n\t\t\t\tlet delta = (pos - target.scrollTop) / smooth;\r\n\r\n\t\t\t\ttarget.scrollTop += delta;\r\n\r\n\t\t\t\tif (Math.abs(delta) > 0.5) {\r\n\t\t\t\t\trequestFrame(update);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tmoving = false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tlet requestFrame = (function () {\r\n\t\t\t\t// requestAnimationFrame cross browser\r\n\t\t\t\treturn (\r\n\t\t\t\t\twindow.requestAnimationFrame ||\r\n\t\t\t\t\twindow.webkitRequestAnimationFrame ||\r\n\t\t\t\t\twindow.mozRequestAnimationFrame ||\r\n\t\t\t\t\twindow.oRequestAnimationFrame ||\r\n\t\t\t\t\twindow.msRequestAnimationFrame ||\r\n\t\t\t\t\tfunction (func) {\r\n\t\t\t\t\t\twindow.setTimeout(func, 1000 / 50);\r\n\t\t\t\t\t}\r\n\t\t\t\t);\r\n\t\t\t})();\r\n\t\t},\r\n\t\tshowMultiSelect() {\r\n\t\t\tthis.multiSelect = true;\r\n\t\t},\r\n\t\tselectMessage(message) {\r\n\t\t\tif (\r\n\t\t\t\tthis.selectedMessages.filter(\r\n\t\t\t\t\t(item) => item.message_id === message.message_id\r\n\t\t\t\t).length === 0\r\n\t\t\t) {\r\n\t\t\t\tthis.selectedMessages.push(message);\r\n\t\t\t}\r\n\t\t},\r\n\t\tremoveMessage(message) {\r\n\t\t\tconst index = this.selectedMessages.findIndex(\r\n\t\t\t\t(item) => item.message_id === message.message_id\r\n\t\t\t);\r\n\t\t\tif (index !== -1) {\r\n\t\t\t\tthis.selectedMessages.splice(index, 1);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\ttoreference(reference) {\r\n\t\t\tthis.$emit(\"toreference\", reference);\r\n\t\t},\r\n\t},\r\n};\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/babel-loader/lib/index.js!./index.js?vue&type=script&lang=js&external\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/babel-loader/lib/index.js!./index.js?vue&type=script&lang=js&external\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=7cedee84&scoped=true\"\nimport script from \"./index.js?vue&type=script&lang=js&external\"\nexport * from \"./index.js?vue&type=script&lang=js&external\"\nfunction injectStyles (context) {\n  \n  var style0 = require(\"./index.sass?vue&type=style&index=0&id=7cedee84&prod&scoped=true&lang=sass&external\")\nif (style0.__inject__) style0.__inject__(context)\n\n}\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  injectStyles,\n  \"7cedee84\",\n  null\n  ,true\n)\n\nexport default component.exports","import { mapState } from \"vuex\";\r\n\r\nimport events from \"@/components/events/list/index.vue\";\r\nimport f from \"@/application/functions\";\r\n\r\nexport default {\r\n\tname: \"chatList\",\r\n\tprops: {\r\n\t\tchat: Object,\r\n\t\tfilterType: String,\r\n\t\terror: [Object, Error, String],\r\n\t\tselectedMessages: {\r\n\t\t\ttype: Array,\r\n\t\t\tdefault: () => {\r\n\t\t\t\treturn [];\r\n\t\t\t},\r\n\t\t},\r\n\t\tsearchresults: null,\r\n\t},\r\n\r\n\tcomponents: {\r\n\t\tevents,\r\n\t},\r\n\r\n\tinject: [\"streamMode\"],\r\n\r\n\tdata: function () {\r\n\t\treturn {\r\n\t\t\tencryptedEvents: [],\r\n\t\t\tloading: false,\r\n\t\t\tscrolling: false,\r\n\t\t\tscrollingTo: 0,\r\n\t\t\tcancelNextScroll: false,\r\n\t\t\ttimeline: null,\r\n\t\t\tlastEvent: {},\r\n\t\t\tscrollType: String,\r\n\t\t\tesize: {},\r\n\t\t\tp_b: false,\r\n\t\t\tp_f: false,\r\n\r\n\t\t\tupdateTimeout: null,\r\n\t\t\tupdateInterval: null,\r\n\t\t\tevents: [],\r\n\t\t\tfirstPaginate: true,\r\n\t\t\treadPromise: null,\r\n\r\n\t\t\tactivated: false,\r\n\t\t};\r\n\t},\r\n\r\n\tmounted: function () {\r\n\t\tthis.init();\r\n\r\n\t\tif (this.chat) {\r\n\t\t\t// this.readAll()\r\n\t\t}\r\n\t},\r\n\r\n\twatch: {\r\n\t\t//$route: 'getdata'\r\n\r\n\t\tactive: function () {\r\n\t\t\t// if(this.minimized && !this.active){\r\n\t\t\t//   this.scrollToNew(0)\r\n\t\t\t// }\r\n\t\t\t// if(this.minimized && this.active){\r\n\t\t\t//   this.readAll();\r\n\t\t\t// }\r\n\t\t},\r\n\r\n\t\tfilterType: function () {\r\n\t\t\tthis.init();\r\n\t\t},\r\n\r\n\t\tactivated: {\r\n\t\t\timmediate: true,\r\n\t\t\thandler: function () {\r\n\t\t\t\tif (this.updateInterval) {\r\n\t\t\t\t\tclearInterval(this.updateInterval);\r\n\t\t\t\t\tthis.updateInterval = null;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this.activated) {\r\n\t\t\t\t\tthis.updateInterval = setInterval(this.update, 300);\r\n\t\t\t\t} else {\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n\tcomputed: {\r\n\t\t...mapState({\r\n\t\t\tlloading: function () {\r\n\t\t\t\treturn this.loading || this[\"p_f\"] || this[\"p_b\"];\r\n\t\t\t},\r\n\r\n\t\t\tauth: (state) => state.auth,\r\n\r\n\t\t\tsettings_read: (state) => !state.dontreadreceipts,\r\n\r\n\t\t\teventsTypes: function () {\r\n\t\t\t\tvar types = {\r\n\t\t\t\t\t\"m.room.message\": true,\r\n\t\t\t\t\t\"p.room.encrypt.message\": true,\r\n\t\t\t\t\t\"p.room.\": true,\r\n\t\t\t\t\t\"m.room.image\": true,\r\n\t\t\t\t\t\"m.room.audio\": true,\r\n\t\t\t\t\t\"m.room.file\": true,\r\n\t\t\t\t\t\"m.call.invite\": true,\r\n\t\t\t\t\t\"m.room.request_calls_access\": true,\r\n\t\t\t\t\t\"m.call.hangup\": true,\r\n\t\t\t\t\t\"m.call.reject\": true,\r\n\t\t\t\t\t\"m.fully_read\": true,\r\n\t\t\t\t};\r\n\r\n\t\t\t\tif (\r\n\t\t\t\t\t_.toArray((this.chat && this.chat.currentState.members) || {})\r\n\t\t\t\t\t\t.length > 2\r\n\t\t\t\t) {\r\n\t\t\t\t\ttypes[\"m.room.member\"] = true;\r\n\t\t\t\t\ttypes[\"m.room.power_levels\"] = true;\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn types;\r\n\t\t\t},\r\n\r\n\t\t\tpocketnet: (state) => state.pocketnet,\r\n\t\t\tminimized: (state) => state.minimized,\r\n\t\t\tactive: (state) => state.active,\r\n\r\n\t\t\tbin: function (state) {\r\n\t\t\t\treturn state.pocketnet;\r\n\t\t\t},\r\n\t\t}),\r\n\t},\r\n\r\n\tcreated() {\r\n\t\tthis.activated = true;\r\n\t},\r\n\tbeforeDestroy() {\r\n\t\tthis.activated = false;\r\n\r\n\t\tif (this.timeline) {\r\n\t\t\tthis.timeline.unpaginate(this.timeline._eventCount, true);\r\n\t\t}\r\n\t},\r\n\r\n\tactivated() {\r\n\t\tthis.activated = true;\r\n\t},\r\n\r\n\tdeactivated() {\r\n\t\tthis.activated = false;\r\n\t},\r\n\r\n\tmethods: {\r\n\t\teditingEvent: function ({ event, text }) {\r\n\t\t\tthis.$emit(\"editingEvent\", { event, text });\r\n\t\t},\r\n\t\treplyEvent: function ({ event }) {\r\n\t\t\tthis.$emit(\"replyEvent\", { event });\r\n\t\t},\r\n\r\n\t\tremoveEvent: function (event) {\r\n\t\t\tthis.chat.getLiveTimeline().removeEvent(event.event.event_id);\r\n\t\t},\r\n\t\twh: function () {\r\n\t\t\tif (this.esize.clientHeight) return this.esize.clientHeight;\r\n\t\t},\r\n\t\tgetEvents: function () {\r\n\t\t\tvar events = this.timeline.getEvents();\r\n\r\n\t\t\tvar lastCallAccess = events\r\n\t\t\t\t.filter((e) => {\r\n\t\t\t\t\treturn e.event.type === \"m.room.request_calls_access\";\r\n\t\t\t\t})\r\n\t\t\t\t.pop();\r\n\r\n\t\t\tevents = _.filter(events, (e) => {\r\n\t\t\t\tvar type = e.event.type;\r\n\r\n\t\t\t\tif (e.localRedactionEvent() || e.getRedactionEvent()) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (e.event.type === \"m.room.request_calls_access\") {\r\n\t\t\t\t\tif (e.event.event_id === lastCallAccess.event.event_id) {\r\n\t\t\t\t\t\tif (e.event.content.accepted !== null) {\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (\r\n\t\t\t\t\te.event.type === \"m.room.power_levels\" &&\r\n\t\t\t\t\tObject.keys(e.event.content.users).length === 1\r\n\t\t\t\t) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (\r\n\t\t\t\t\tthis.chat.currentState.getMembers().length <= 2 &&\r\n\t\t\t\t\te.event.type === \"m.room.member\" &&\r\n\t\t\t\t\t\"m.room.power_levels\"\r\n\t\t\t\t) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\treturn !this.eventsTypes || this.eventsTypes[type];\r\n\t\t\t});\r\n\r\n\t\t\tevents = events.reverse();\r\n\r\n\t\t\tthis.relations(events);\r\n\r\n\t\t\tevents = _.sortBy(events, function (e) {\r\n\t\t\t\treturn e.replacingEventDate() || e.getDate() || Infinity;\r\n\t\t\t});\r\n\r\n\t\t\tevents = events.reverse();\r\n\r\n\t\t\tevents = _.uniq(events, (e) => {\r\n\t\t\t\treturn this.core.mtrx.clearEventId(e) || f.makeid();\r\n\t\t\t});\r\n\r\n\t\t\tevents = _.sortBy(events, function (e) {\r\n\t\t\t\treturn e.getDate() || Infinity;\r\n\t\t\t});\r\n\r\n\t\t\tevents = events.reverse();\r\n\r\n\t\t\tthis.$emit(\"getEvents\", events);\r\n\t\t\t// events = _.filter(events, function (e) {\r\n\t\t\t//   return e.ty\r\n\t\t\t// })\r\n\r\n\t\t\treturn events;\r\n\t\t},\r\n\r\n\t\tgetEventsAndEncrypt: function () {\r\n\t\t\tvar events = this.getEvents();\r\n\r\n\t\t\treturn Promise.all(\r\n\t\t\t\t_.map(events, (e) => {\r\n\t\t\t\t\tif (!this.chat.pcrypto) return Promise.resolve();\r\n\r\n\t\t\t\t\tif (e.event.decrypted) return Promise.resolve();\r\n\r\n\t\t\t\t\tvar pr = null;\r\n\t\t\t\t\tvar subtype = f.deep(e, \"event.content.msgtype\");\r\n\r\n\t\t\t\t\t//if(f.deep(e, 'event.content.msgtype') != 'm.encrypted') return Promise.resolve()\r\n\r\n\t\t\t\t\tvar einfo =\r\n\t\t\t\t\t\tf.deep(e, \"event.content.info.secrets\") ||\r\n\t\t\t\t\t\tf.deep(e, \"event.content.pbody.secrets\");\r\n\r\n\t\t\t\t\tif (einfo) {\r\n\t\t\t\t\t\tif (subtype == \"m.image\") {\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (subtype == \"m.audio\") {\r\n\t\t\t\t\t\t\tpr = this.core.mtrx.getAudio(this.chat, e).catch((error) => {\r\n\t\t\t\t\t\t\t\tconsole.error(error);\r\n\r\n\t\t\t\t\t\t\t\te.event.decrypted = {\r\n\t\t\t\t\t\t\t\t\tmsgtype: \"m.bad.encrypted\",\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif (subtype == \"m.audio\") {\r\n\t\t\t\t\t\t\tpr = this.core.mtrx.getAudioUnencrypt(this.chat, e);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (subtype == \"m.encrypted\") {\r\n\t\t\t\t\t\t\tpr = this.chat.pcrypto\r\n\t\t\t\t\t\t\t\t.decryptEvent(e.event)\r\n\t\t\t\t\t\t\t\t.then((d) => {\r\n\t\t\t\t\t\t\t\t\te.event.decrypted = d;\r\n\r\n\t\t\t\t\t\t\t\t\treturn Promise.resolve();\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.catch((e) => {\r\n\t\t\t\t\t\t\t\t\te.event.decrypted = {\r\n\t\t\t\t\t\t\t\t\t\tmsgtype: \"m.bad.encrypted\",\r\n\t\t\t\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t\t\t\t\treturn Promise.resolve();\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (!pr) return Promise.resolve();\r\n\r\n\t\t\t\t\treturn pr.catch((e) => {\r\n\t\t\t\t\t\treturn Promise.resolve();\r\n\t\t\t\t\t});\r\n\t\t\t\t}),\r\n\t\t\t).then(() => {\r\n\t\t\t\treturn Promise.resolve(events);\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\trelations: function (events) {\r\n\t\t\tvar ts = this.timeline.timelineSet;\r\n\r\n\t\t\t_.each(events, (e) => {\r\n\t\t\t\ttry {\r\n\t\t\t\t\t//if(!e.event.content.edited){\r\n\t\t\t\t\tvar rt = ts.relations.getChildEventsForEvent(\r\n\t\t\t\t\t\te.event.event_id,\r\n\t\t\t\t\t\t\"m.replace\",\r\n\t\t\t\t\t\t\"m.room.message\",\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t\tif (rt) {\r\n\t\t\t\t\t\tvar last = rt.getLastReplacement();\r\n\r\n\t\t\t\t\t\tif (last) {\r\n\t\t\t\t\t\t\te.event.content.body = last.event.content.body;\r\n\t\t\t\t\t\t\te.event.content.edited = last.event.event_id;\r\n\t\t\t\t\t\t\te.event.content.block = last.event.content.block;\r\n\t\t\t\t\t\t\te.event.content.msgtype = last.event.content.msgtype;\r\n\t\t\t\t\t\t\te.event.decrypted = last.event.decrypted;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\tconsole.error(e);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\tcustomTimelineSet: async function (name, set) {\r\n\t\t\tif (!name) return;\r\n\r\n\t\t\tvar filter = new this.core.mtrx.sdk.Filter(client.getUserId());\r\n\r\n\t\t\tif (typeof set === \"function\") set(filter);\r\n\t\t\telse {\r\n\t\t\t\tfilter.setDefinition({\r\n\t\t\t\t\troom: {\r\n\t\t\t\t\t\ttimeline: {\r\n\t\t\t\t\t\t\tcontains_url: this.filterType === \"images\",\r\n\t\t\t\t\t\t\ttypes: [\"m.room.message\"],\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tfilter.filterId = await this.core.mtrx.client.getOrCreateFilter(\r\n\t\t\t\t`FILTER_${name}_` + this.core.mtrx.client.credentials.userId,\r\n\t\t\t\tfilter,\r\n\t\t\t);\r\n\r\n\t\t\treturn this.chat.getOrCreateFilteredTimelineSet(filter);\r\n\t\t},\r\n\t\tinit: async function () {\r\n\t\t\tthis.loading = true;\r\n\t\t\tthis.firstPaginate = true;\r\n\r\n\t\t\t//this.chat.getTimelineForEvent('$FXUvcjIqcvDu0meLTnz-8plloZoNHLIYEb6WGQMWO3s')\r\n\r\n\t\t\t//this.chat.getTimelineForEvent('$FXUvcjIqcvDu0meLTnz-8plloZoNHLIYEb6WGQMWO3s')\r\n\r\n\t\t\t//this.chat.getLiveTimeline();\r\n\r\n\t\t\tvar ts;\r\n\r\n\t\t\tswitch (this.filterType) {\r\n\t\t\t\tcase \"images\": {\r\n\t\t\t\t\tthis.scrollType = \"custom\";\r\n\t\t\t\t\tts = await this.customTimelineSet(\"FILES\");\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcase \"text\": {\r\n\t\t\t\t\tts = await this.customTimelineSet(\"TEXT\", (filter) => {\r\n\t\t\t\t\t\tfilter.setDefinition({\r\n\t\t\t\t\t\t\troom: {\r\n\t\t\t\t\t\t\t\ttimeline: {\r\n\t\t\t\t\t\t\t\t\ttypes: [\"m.room.message\"],\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t});\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcase \"donate\": {\r\n\t\t\t\t\tts = await this.customTimelineSet(\"TEXT\", (filter) => {\r\n\t\t\t\t\t\tfilter.setDefinition({\r\n\t\t\t\t\t\t\troom: {\r\n\t\t\t\t\t\t\t\ttimeline: {\r\n\t\t\t\t\t\t\t\t\tcontains_url: true,\r\n\t\t\t\t\t\t\t\t\ttypes: [\"m.room.message\"],\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t});\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t/*case \"pkoindisabled\": {\r\n\t\t\t\t\tts = await this.customTimelineSet('TEXT', (filter) => {\r\n\t\t\t\t\t\tfilter.setDefinition({\r\n\t\t\t\t\t\t\troom: {\r\n\t\t\t\t\t\t\t\ttimeline: {\r\n\t\t\t\t\t\t\t\t\tcontains_url: false,\r\n\t\t\t\t\t\t\t\t\ttypes: [\"m.room.message\"]\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t});\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}*/\r\n\r\n\t\t\t\tdefault: {\r\n\t\t\t\t\tvar timeline = this.chat.getLiveTimeline();\r\n\t\t\t\t\tts = timeline.getTimelineSet();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis.timeline = new this.core.mtrx.sdk.TimelineWindow(\r\n\t\t\t\tthis.core.mtrx.client,\r\n\t\t\t\tts,\r\n\t\t\t);\r\n\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tthis.timeline\r\n\t\t\t\t\t.load(/*null, (this.wh() || 600)*/)\r\n\t\t\t\t\t.then((r) => {\r\n\t\t\t\t\t\treturn this.getEventsAndEncrypt();\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.then((events) => {\r\n\t\t\t\t\t\tthis.events = events;\r\n\r\n\t\t\t\t\t\tthis.loading = false;\r\n\r\n\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\tthis.autoPaginateAll();\r\n\t\t\t\t\t\t}, 300);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch((e) => {\r\n\t\t\t\t\t\tthis.loading = false;\r\n\t\t\t\t\t});\r\n\t\t\t}, 30);\r\n\r\n\t\t\t/*setTimeout(() => {\r\n\t\t\t\tthis.paginateToEvent('$FXUvcjIqcvDu0meLTnz-8plloZoNHLIYEb6WGQMWO3s').then(event => {\r\n\t\t\t\t\tconsole.log(\"TOEVENT\", event)\r\n\t\t\t\t})\r\n\t\t\t}, 1000)*/\r\n\t\t},\r\n\r\n\t\tpaginateToEvent: function (event_id) {\r\n\t\t\tvar event = _.find(this.events, (e) => {\r\n\t\t\t\treturn e.event.event_id == event_id;\r\n\t\t\t});\r\n\r\n\t\t\tif (event) {\r\n\t\t\t\treturn Promise.resolve(event);\r\n\t\t\t} else {\r\n\t\t\t\tvar promise = this.paginate(\"b\");\r\n\r\n\t\t\t\tif (promise) {\r\n\t\t\t\t\treturn promise\r\n\t\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\t\treturn this.paginateToEvent(event_id);\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.catch((e) => {\r\n\t\t\t\t\t\t\tconsole.error(\"EROR\", e);\r\n\t\t\t\t\t\t\tif (!event) return Promise.resolve(null);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (!event) return Promise.resolve(null);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tautoPaginate: function (direction) {\r\n\t\t\tif (this.needLoad(direction)) {\r\n\t\t\t\tvar pr = this.paginate(direction);\r\n\r\n\t\t\t\tif (pr) pr.catch((e) => {});\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tpaginate: function (direction, rnd) {\r\n\t\t\t//$(this.$el).find('.eventsflex')[0]\r\n\r\n\t\t\tif (!this.loading && this.timeline && !this[\"p_\" + direction]) {\r\n\t\t\t\tif (this.timeline.canPaginate(direction) || rnd) {\r\n\t\t\t\t\tthis[\"p_\" + direction] = true;\r\n\r\n\t\t\t\t\tlet count = /*this.firstPaginate ? 24 : */ 20;\r\n\r\n\t\t\t\t\tvar error = null;\r\n\r\n\t\t\t\t\treturn this.timeline\r\n\t\t\t\t\t\t.paginate(direction, count)\r\n\t\t\t\t\t\t.then((e) => {\r\n\t\t\t\t\t\t\treturn Promise.resolve();\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.catch((e) => {\r\n\t\t\t\t\t\t\terror = e;\r\n\t\t\t\t\t\t\treturn Promise.resolve();\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.then((r) => {\r\n\t\t\t\t\t\t\treturn this.getEventsAndEncrypt();\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.then((events) => {\r\n\t\t\t\t\t\t\tthis.events = events;\r\n\r\n\t\t\t\t\t\t\tthis.firstPaginate = false;\r\n\r\n\t\t\t\t\t\t\tthis[\"p_\" + direction] = false;\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.catch((e) => {\r\n\t\t\t\t\t\t\tif (e) return Promise.reject(e);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.readAll();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tautoPaginateAll: function () {\r\n\t\t\tif (this.filterType === \"images\") {\r\n\t\t\t\tthis.autoPaginate(\"b\");\r\n\t\t\t} else {\r\n\t\t\t\tthis.autoPaginate(\"b\");\r\n\t\t\t\tthis.autoPaginate(\"f\");\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tneedLoad: function (direction) {\r\n\t\t\tvar r = false;\r\n\r\n\t\t\tvar scrollHeight = this.esize.scrollHeight || 0;\r\n\t\t\tvar scrollTop = this.esize.scrollTop || 0;\r\n\t\t\tvar clientHeight = Math.max(this.esize.clientHeight || 0, 800);\r\n\r\n\t\t\tif (direction == \"b\") {\r\n\t\t\t\tvar safespace = clientHeight;\r\n\r\n\t\t\t\tif (scrollHeight - scrollTop < clientHeight + safespace) r = true;\r\n\t\t\t} else {\r\n\t\t\t\tif (scrollTop < clientHeight) r = true;\r\n\t\t\t}\r\n\r\n\t\t\treturn r;\r\n\t\t},\r\n\r\n\t\treadEvent: function (event) {\r\n\t\t\tif (this.streamMode) return;\r\n\r\n\t\t\tvar byme = this.core.mtrx.me(event.event.sender);\r\n\r\n\t\t\tif (byme) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.core.mtrx.client.sendReadReceipt(event);\r\n\t\t},\r\n\r\n\t\treadFirst: function () {\r\n\t\t\tif (this.streamMode) return;\r\n\r\n\t\t\tvar events = this.timeline.getEvents();\r\n\r\n\t\t\tthis.readEvent(events[0]);\r\n\t\t},\r\n\r\n\t\treadLast: function () {\r\n\t\t\tif (this.streamMode) return;\r\n\r\n\t\t\tvar events = this.timeline.getEvents();\r\n\r\n\t\t\tthis.readEvent(events[events.length - 1]);\r\n\t\t},\r\n\r\n\t\treadEvents: function (events) {\r\n\t\t\tif (this.streamMode) return;\r\n\r\n\t\t\t_.each(events, (e) => {\r\n\t\t\t\tthis.readEvent(e);\r\n\t\t\t});\r\n\t\t},\r\n\t\treadOne() {\r\n\t\t\tif (this.streamMode) return;\r\n\r\n\t\t\tthis.core.mtrx\r\n\t\t\t\t.client(this.chat.timeline[this.chat.timeline.length - 1])\r\n\t\t\t\t.then((r) => {\r\n\t\t\t\t\treturn r;\r\n\t\t\t\t});\r\n\t\t},\r\n\t\tdebouncedReadAll: _.debounce(function () {\r\n\t\t\tif (!this.chat || this.streamMode) return;\r\n\t\t\tif (this.readPromise) return;\r\n\r\n\t\t\tvar i = this.chat.timeline.length - 1;\r\n\t\t\tvar event = null;\r\n\r\n\t\t\tevent = this.chat.timeline[i];\r\n\r\n\t\t\t/*while (i >= 0 && !event) {\r\n\t\t\t\tvar e = this.chat.timeline[i];\r\n\r\n\t\t\t\tvar type = (e.event.type || \"\")\r\n\r\n\t\t\t\tif (type.indexOf('m.call') > -1){\r\n\t\t\t\t\tif(type.indexOf('candidates') > -1 ) {\r\n\t\t\t\t\t\treturn\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(e.readed) return\r\n\r\n\t\t\t\tif (!this.core.mtrx.me(e.sender.userId)) {\r\n\r\n\t\t\t\t\tif(!this.core.mtrx.isReaded(e)){\r\n\t\t\t\t\t\tevent = e;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\telse{\r\n\t\t\t\t\r\n\t\t\t\t}\r\n\r\n\t\t\t\ti--;\r\n\t\t\t}*/\r\n\r\n\t\t\tif (event) {\r\n\t\t\t\tif (event.readError) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar eid = event.event.event_id;\r\n\r\n\t\t\t\tthis.readPromise =\r\n\t\t\t\t\tthis.streamMode ||\r\n\t\t\t\t\tthis.core.mtrx.client\r\n\t\t\t\t\t\t.setRoomReadMarkers(\r\n\t\t\t\t\t\t\tthis.chat.currentState.roomId,\r\n\t\t\t\t\t\t\teid,\r\n\t\t\t\t\t\t\tevent /*, {\r\n\t\t\t\t\t\thidden: !this.settings_read ? true : false,\r\n\t\t\t\t\t}*/,\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\t.then((r) => {\r\n\t\t\t\t\t\t\tevent.readed = true;\r\n\t\t\t\t\t\t\treturn r;\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.catch((e) => {\r\n\t\t\t\t\t\t\tconsole.error(e);\r\n\t\t\t\t\t\t\tevent.readError = e;\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.finally(() => {\r\n\t\t\t\t\t\t\tthis.readPromise = null;\r\n\t\t\t\t\t\t});\r\n\t\t\t}\r\n\t\t}, 100),\r\n\t\treadAll: function () {\r\n\t\t\tif (\r\n\t\t\t\tdocument.hasFocus() &&\r\n\t\t\t\t(!this.pocketnet || this.active) &&\r\n\t\t\t\t!this.core.hiddenInParent &&\r\n\t\t\t\tthis.chat &&\r\n\t\t\t\tthis.chat.getJoinedMemberCount() > 0 &&\r\n\t\t\t\tthis.chat.getUnreadNotificationCount() !== 0\r\n\t\t\t) {\r\n\t\t\t\tthis.debouncedReadAll();\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t//////////////\r\n\r\n\t\tscrollE: function (size) {\r\n\t\t\tthis.updatedSize(size);\r\n\t\t\tthis.$emit(\"scroll\", size);\r\n\t\t},\r\n\r\n\t\tupdatedSize: function (size) {\r\n\t\t\tthis.esize = size;\r\n\t\t},\r\n\r\n\t\tupdate: function (e) {\r\n\t\t\tif (!this.activated) return;\r\n\t\t\tif (!this.scrolling) {\r\n\t\t\t\tthis.autoPaginateAll();\r\n\t\t\t} else {\r\n\t\t\t\t// e.preventDefault()\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tscrollToNew: function (s) {\r\n\t\t\tthis.scrolling = true;\r\n\r\n\t\t\tthis.$refs.eventslist.scrollToNew(s);\r\n\r\n\t\t\tthis.scrolling = false;\r\n\t\t},\r\n\r\n\t\timageGallery: function (e) {\r\n\t\t\tthis.$emit(\"eventImage\", e);\r\n\t\t},\r\n\r\n\t\tmenuIsVisibleHandler: function (isVisible) {\r\n\t\t\tthis.$emit(\"menuIsVisible\", isVisible);\r\n\t\t},\r\n\r\n\t\tscrollToEvent: function (reference) {\r\n\t\t\tf.pretry(() => {\r\n\t\t\t\treturn !this.loading && this.timeline && !this[\"p_b\"];\r\n\t\t\t})\r\n\t\t\t\t.then(() => {\r\n\t\t\t\t\tthis.$store.state.globalpreloader = true;\r\n\r\n\t\t\t\t\treturn this.paginateToEvent(reference.event.event_id);\r\n\t\t\t\t})\r\n\t\t\t\t.then((event) => {\r\n\t\t\t\t\tif (event) {\r\n\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\tthis.$refs.eventslist.scrollToEvent(event);\r\n\t\t\t\t\t\t}, 300);\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.catch((e) => {\r\n\t\t\t\t\tconsole.error(e);\r\n\t\t\t\t})\r\n\t\t\t\t.finally(() => {\r\n\t\t\t\t\tthis.$store.state.globalpreloader = false;\r\n\t\t\t\t});\r\n\t\t},\r\n\t},\r\n};\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/babel-loader/lib/index.js!./index.js?vue&type=script&lang=js&external\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/babel-loader/lib/index.js!./index.js?vue&type=script&lang=js&external\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=430b7992&scoped=true\"\nimport script from \"./index.js?vue&type=script&lang=js&external\"\nexport * from \"./index.js?vue&type=script&lang=js&external\"\nfunction injectStyles (context) {\n  \n  var style0 = require(\"./index.sass?vue&type=style&index=0&id=430b7992&prod&scoped=true&lang=sass&external\")\nif (style0.__inject__) style0.__inject__(context)\n\n}\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  injectStyles,\n  \"430b7992\",\n  null\n  ,true\n)\n\nexport default component.exports","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../../node_modules/sass-loader/dist/cjs.js??ref--10-oneOf-1-4!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./name.vue?vue&type=style&index=0&id=8fb6d080&prod&scoped=true&lang=sass\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add CSS to Shadow Root\nvar add = require(\"!../../../../node_modules/vue-style-loader/lib/addStylesShadow.js\").default\nmodule.exports.__inject__ = function (shadowRoot) {\n  add(\"357f71e2\", content, shadowRoot)\n};","export * from \"-!../../../../node_modules/vue-style-loader/index.js??ref--10-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../../node_modules/sass-loader/dist/cjs.js??ref--10-oneOf-1-4!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./name.vue?vue&type=style&index=0&id=8fb6d080&prod&scoped=true&lang=sass\"","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../../node_modules/sass-loader/dist/cjs.js??ref--10-oneOf-1-4!./index.sass?vue&type=style&index=0&id=7cedee84&prod&scoped=true&lang=sass&external\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add CSS to Shadow Root\nvar add = require(\"!../../../../node_modules/vue-style-loader/lib/addStylesShadow.js\").default\nmodule.exports.__inject__ = function (shadowRoot) {\n  add(\"95b02382\", content, shadowRoot)\n};","export * from \"-!../../../../node_modules/vue-style-loader/index.js??ref--10-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../../node_modules/sass-loader/dist/cjs.js??ref--10-oneOf-1-4!./index.sass?vue&type=style&index=0&id=7cedee84&prod&scoped=true&lang=sass&external\"","export * from \"-!../../../../node_modules/vue-style-loader/index.js??ref--10-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../../node_modules/sass-loader/dist/cjs.js??ref--10-oneOf-1-4!./index.sass?vue&type=style&index=0&id=430b7992&prod&scoped=true&lang=sass&external\"","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"nameline\"},[(_vm.isShowGroupIcon)?_c('div',{staticClass:\"iconGroup\",class:{public : _vm.isPublic}},[(!_vm.isPublic)?_c('i',{staticClass:\"fas fa-user-friends\"}):_c('i',{staticClass:\"fas fa-users\"})]):_vm._e(),(_vm.miniappicon)?_c('div',{staticClass:\"miniappicon\"},[_c('bgimage',{attrs:{\"src\":_vm.miniappicon}})],1):_vm._e(),_c('div',{staticClass:\"nameofchat\"},[_vm._v(_vm._s(_vm.convertedName))])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n\t<div class=\"nameline\">\r\n\t\t<div class=\"iconGroup\" :class=\"{public : isPublic}\" v-if=\"isShowGroupIcon\">\r\n\t\t\t<i class=\"fas fa-user-friends\" v-if=\"!isPublic\"></i>\r\n\t\t\t<i class=\"fas fa-users\" v-else></i>\r\n\t\t</div>\r\n\t\t<div class=\"miniappicon\" v-if=\"miniappicon\">\r\n\t\t\t<bgimage :src=\"miniappicon\" />\r\n\t\t</div>\r\n\t\t<div class=\"nameofchat\" >{{convertedName}}</div>\r\n\t</div>\r\n</template>\r\n\r\n<style scoped lang=\"sass\">\r\n\r\n.nameofchat\r\n\twhite-space: nowrap\r\n.nameline\r\n\tdisplay: flex\r\n\talign-items: flex-end\r\n\r\n.miniappicon\r\n\tmargin-right: 0.5 * $r\r\n\tmargin-block: 0.5 * $r\r\n\r\n\t.bgimage\r\n\t\twidth : 12px\r\n\t\theight: 12px\r\n\t\tborder-radius: 2px\r\n\r\n.iconGroup\r\n\tfont-size: 0.4em\r\n\twidth: 16px\r\n\tmin-width: 16px\r\n\ttext-align: center\r\n\theight: 16px\r\n\tline-height: 16px\r\n\tborder-radius: 8px\r\n\tbackground: srgb(--neutral-grad-2)\r\n\tmargin-right: $r\r\n\tmargin-block: 0.5 * $r\r\n\r\n\t&.public\r\n\t\tbackground: srgb(--color-good)\r\n\r\n\t\ti\r\n\t\t\tcolor: srgb(--text-on-bg-shadow-color)\r\n\r\n\ti\r\n\t\tcolor: srgb(--neutral-grad-1)\r\n\r\n\r\n\r\n\t\r\n</style>\r\n\r\n<script>\r\nexport default {\r\n\tname: \"chatName\",\r\n\r\n\tprops: {\r\n\t\tchat: Object,\r\n\t\tpreview: Boolean,\r\n\t\tm_chat: {},\r\n\t},\r\n\tinject: [\"matches\", \"markText\"],\r\n\tdata: function () {\r\n\t\treturn {\r\n\t\t\t//convertedName: ''\r\n\t\t};\r\n\t},\r\n\tcomputed: {\r\n\t\tusers: function () {\r\n\t\t\tif (!this.chat) return [];\r\n\r\n\t\t\tvar u = this.core.mtrx.anotherChatUsers(this.chat.roomId);\r\n\r\n\t\t\t/*u = _.filter(u, (usr) => {\r\n\t\t\t\tif(usr.membership == 'leave') return false\r\n\r\n\t\t\t\treturn true\r\n\t\t\t})*/\r\n\r\n\t\t\treturn u\r\n\t\t},\r\n\r\n\t\tconvertedName: function () {\r\n\t\t\tif (\r\n\t\t\t\tthis.m_chat &&\r\n\t\t\t\tthis.m_chat.getJoinRule() === \"public\" &&\r\n\t\t\t\tthis.m_chat.currentState.getStateEvents(\"m.room.name\").length > 0\r\n\t\t\t) {\r\n\t\t\t\treturn this.m_chat.currentState\r\n\t\t\t\t\t.getStateEvents(\"m.room.name\")[0]\r\n\t\t\t\t\t.getContent()?.name;\r\n\t\t\t}\r\n\t\t\tvar users = _.filter(this.users, (user) => {\r\n\t\t\t\treturn user.userId != this.core.user.userinfo.id;\r\n\t\t\t});\r\n\r\n\t\t\tvar names = _.filter(\r\n\t\t\t\t_.map(users, (user) => {\r\n\t\t\t\t\tif (this.$store.state.users[user.userId])\r\n\t\t\t\t\t\treturn this.$store.state.users[user.userId].name;\r\n\t\t\t\t}),\r\n\t\t\t\tfunction (name) {\r\n\t\t\t\t\treturn name;\r\n\t\t\t\t}\r\n\t\t\t);\r\n\r\n\t\t\tif (!names.length) {\r\n\t\t\t\tif (this.core.mtrx.chatUsers(this.chat.roomId).length) {\r\n\t\t\t\t\treturn \"-\";\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn \"-\";\r\n\t\t\t}\r\n\r\n\t\t\tif (this.m_chat?.name.indexOf(\"@\") == 0)\r\n\t\t\t\treturn this.m_chat?.name.replace(\"@\", \"\");\r\n\r\n\t\t\treturn names.join(\", \");\r\n\t\t},\r\n\r\n\t\tmarkMatches: function () {\r\n\r\n\r\n\r\n\t\t\treturn this.markText ? this.markText(this.convertedName, true) : this.convertedName;\r\n\t\t},\r\n\r\n\t\tisPublic(){\r\n\t\t\treturn this.isShowGroupIcon && this.m_chat.getJoinRule() === \"public\"\r\n\t\t},\r\n\r\n\t\tisShowGroupIcon() {\r\n\r\n\t\t\treturn !this.chat.miniappchat && this.m_chat?.name.slice(0, 1) === \"@\";\r\n\t\t},\r\n\r\n\t\tminiappicon(){\r\n\t\t\treturn this.chat.miniappchat ? this.chat.miniappchat.icon : null\r\n\t\t}\r\n\r\n\t\t\r\n\t},\r\n\r\n\tmounted: function () {},\r\n};\r\n</script>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./name.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./name.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./name.vue?vue&type=template&id=8fb6d080&scoped=true\"\nimport script from \"./name.vue?vue&type=script&lang=js\"\nexport * from \"./name.vue?vue&type=script&lang=js\"\nfunction injectStyles (context) {\n  \n  var style0 = require(\"./name.vue?vue&type=style&index=0&id=8fb6d080&prod&scoped=true&lang=sass\")\nif (style0.__inject__) style0.__inject__(context)\n\n}\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  injectStyles,\n  \"8fb6d080\",\n  null\n  ,true\n)\n\nexport default component.exports","export * from \"-!../../../../node_modules/vue-style-loader/index.js??ref--10-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../../node_modules/sass-loader/dist/cjs.js??ref--10-oneOf-1-4!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./icon.vue?vue&type=style&index=0&id=cd2bc92e&prod&scoped=true&lang=sass\""],"sourceRoot":""}